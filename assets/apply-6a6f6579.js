import{q as G,v as B,w as $,x as O,u as I,r as b,e as U,j as e,y as _,C as L,M as R,n as ae,a as V,z as ne,I as E,D as re,H as P,A as oe,g as Y,B as le,E as ie,F as ce,G as J,J as k,K as Q,L as de,Q as ue,S as Z,T as me,U as q,V as pe,W as fe,X as he,Y as xe,Z as ye,$ as je,a0 as ge,a1 as be,t as De,a2 as z,a3 as we,a4 as ve,a5 as Se,a6 as Ne,l as A,c as Ce,a7 as X,N as Fe,a8 as ke,o as Ie,p as W}from"./index-9a1a6fd5.js";import{M as ee}from"./main-d974c04c.js";import{B as T,C as Ae,D as Ee,I as Te}from"./block-61d7e6e5.js";import{D as te,i as M}from"./index.esm-cf22abeb.js";import{H as Le}from"./header-8d9478e7.js";const Re=()=>{const{options:o}=G(),{register:t,control:a,setValue:c}=B(),r=$({name:"tripData",control:a,defaultValue:[]}),{newFormRef:h}=O(),x=I(m=>m.tripDetail).body.map(m=>m.data.map(d=>d.hotel));function n(m){if(!m||!m.startDate||!m.endDate)return 0;const d=new Date(`${m.startDate}:00:00:00`),p=new Date(`${m.endDate}:00:00:00`);return U.count(d,p)+1||0}const s=b.useMemo(()=>{const m=x.map(w=>!!w.some(D=>D!==""));let d;m.some(w=>w)?d="Yes":d="No";const S=m.map((w,D)=>{if(w){const f=n(r[D])-1;return f>0?f:0}else return 0}).reduce((w,D)=>w+D,0);return{isStay:d,day:S}},[r,x]);b.useEffect(()=>{c("IsLodging",s.isStay),c("StayDays",s.day)},[s,c]);const j=b.useMemo(()=>{if(r.length===0)return 0;const m=r.map(d=>[d.startDate,d.endDate]).reduce((d,p)=>d.concat(p),[]).map(d=>new Date(d).getTime()).sort((d,p)=>d-p);return U.count(new Date(m[0]),new Date(m[m.length-1]))+1||0},[r]);return b.useEffect(()=>{c("Days",j)},[j,c]),e.jsxs("fieldset",{className:"space-y-2",children:[e.jsxs("div",{className:"transportation label-input",children:[e.jsxs("label",{children:[e.jsx(_,{}),"交通工具 :"]}),e.jsx(L,{control:a,name:"Transport",render:({field:{onChange:m}})=>e.jsx(R.Async,{forwardRef:h.transport,options:o.transport,onChange:m,getLabelFunction:d=>d.ResourcesName,getValueFunction:d=>d.ResourcesId,value:"ResourcesId",placeholder:"選擇交通工具"})})]}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsxs("div",{className:"stay label-input justify-start",children:[e.jsx("label",{children:"是否住宿 :"}),e.jsx("input",{type:"text",...t("IsLodging"),autoComplete:"off",className:"noBorder w-[5em]",readOnly:!0})]}),e.jsxs("div",{className:"stayDay label-input",children:[e.jsx("label",{children:"住宿總天數 :"}),e.jsx("input",{type:"text",...t("StayDays",{valueAsNumber:!0}),autoComplete:"off",readOnly:!0,className:"noBorder w-[5em]"})]}),e.jsxs("div",{className:"totalDay label-input",children:[e.jsx("label",{children:"出差總天數 :"}),e.jsx("input",{type:"text",...t("Days",{valueAsNumber:!0}),autoComplete:"off",readOnly:!0,className:"noBorder w-[5em]"})]})]})]})},Me=()=>{const{register:o,control:t,setValue:a}=B(),c=[{label:"歐元",value:"EUR"},{label:"台幣",value:"TWD"},{label:"人民幣",value:"RMB"},{label:"美金",value:"USD"}],r=$({name:"Advance_Amount",control:t}),[h,u]=b.useState("0"),{newFormRef:x}=O();function n(s){if(!s.target.value){u("0");return}const j=s.target.value.replace(/[^\d]/g,"")||"0";u(parseInt(j).toLocaleString())}return e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"label-input",children:[e.jsx("label",{children:"預支差旅費 :"}),e.jsx("input",{type:"text",...o("Advance_Amount",{setValueAs:s=>s.replace(/,/g,"")}),onChangeCapture:n,autoComplete:"off",value:h,onFocusCapture:()=>{u("")},onBlur:()=>{var s;h===""&&(u("0"),a("Advance_Amount","0"),a("Curr",""),(s=x.curr.current)==null||s.clearValue())}})]}),e.jsxs("div",{className:"label-input",children:[e.jsxs("label",{children:[r!=="0"&&e.jsx(_,{}),"幣別 :"]}),e.jsx(L,{control:t,name:"Curr",render:({field:{onChange:s}})=>e.jsx(R.Normal,{forwardRef:x.curr,options:c,onChange:s,placeholder:"請選擇"})})]})]})},Pe=()=>{const{control:o}=B(),{newFormRef:t}=O(),{options:a}=G();return e.jsxs("div",{className:"label-input",children:[e.jsxs("label",{children:[e.jsx(_,{}),"代理人 :"]}),e.jsx(L,{control:o,name:"Deputy",render:({field:{onChange:c}})=>e.jsx(R.Async,{forwardRef:t.deputy,onChange:c,options:a.agent,getLabelFunction:r=>r.EmpName,getValueFunction:r=>r.EmpId,value:"EmpId",placeholder:"選擇代理人..."})})]})},$e=""+new URL("pdf_icon-57886ccb.svg",import.meta.url).href,_e=""+new URL("excel_icon-2c17d34a.svg",import.meta.url).href,Be=""+new URL("word_icon-5a31905a.svg",import.meta.url).href,Ve=""+new URL("ppt_icon-89a14cad.svg",import.meta.url).href,ze=""+new URL("img_icon-9ca6055d.svg",import.meta.url).href,Ue=""+new URL("file_icon-9a5f3f8f.svg",import.meta.url).href,Oe=({file:o,className:t,index:a,d:c})=>{function r(u){return u<=1e3?`${u} Byte`:u<=1e3*1e3?`${(u/1024).toFixed(1)} KB`:`${(u/1024/1024).toFixed(1)} MB`}function h(u){return u.type.match(/^image/i)?ze:u.name.match(/.pp(t|tx)$/i)?Ve:u.name.match(/.xl(s|sx)$/i)?_e:u.name.match(/.do(c|cx)$/i)?Be:u.name.match(/.pdf$/i)?$e:Ue}return e.jsxs("section",{className:t,children:[e.jsx("img",{src:h(o),alt:"顯示圖案"}),e.jsxs("div",{className:"content",children:[e.jsx("h3",{className:"title",children:o.name}),e.jsx("p",{className:"size",children:`size: ${r(o.size)}`}),e.jsx("button",{type:"button",onClick:()=>{c(a)},children:e.jsx(E,{icon:e.jsx(re,{size:"1.25rem"}),children:"刪除"})})]})]})},Ye=ae(Oe)`
  display: flex;
  padding: 1rem 2rem;
  gap: 2rem;
  img {
    width: 4rem;
  }
  .content{
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    gap: .5rem;
    flex: 1;
  }
  .title {
    font-size: 1.25rem;
  }
  .size {
    font-size: large.8rem;
    padding-left: 0.5rem;
    color: ${o=>o.theme.color.sectionHeader};
  }
  button {
    padding: 0;
    width: 10rem;
  }
`,He=()=>{const o=I(c=>c.files).body,t=V();function a(c){t(ne(c))}return e.jsxs("div",{children:[e.jsx("p",{children:"表單附件 : "}),e.jsx("article",{className:"grid grid-cols-2",children:o.map((c,r)=>e.jsx(Ye,{file:c,index:r,d:a},r))})]})},qe=({data:o,index:t})=>{var D;const a=(D=P())==null?void 0:D.color,c=I(f=>f.time),[r,h]=b.useState(!1),[u,x]=b.useState(),[n,s]=b.useState({from:o.startDate||"",to:o.endDate||""}),{register:j,setValue:m}=B(),d=()=>e.jsx("span",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{style:{margin:0,display:"flex",alignItems:"center"},children:"select 2 days"})});function p(f){return M(f)?Y("%Y-%m-%d")(f):""}const S=V();function w(f){s(f),M(f==null?void 0:f.from)&&M(f==null?void 0:f.to)&&(m(`tripData.${t}`,{startDate:p(f.from),endDate:p(f.to)}),h(!1))}return b.useEffect(()=>{n&&n.from&&n.to&&S(oe(n))},[n,S]),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"relative flex gap-8",children:[e.jsxs("div",{className:"startDate label-input gap-1 space-x-2",children:[e.jsxs("label",{children:[e.jsx(_,{}),"出差日期(起)"]}),e.jsx("input",{...j(`tripData.${t}.startDate`),className:"date w-full",style:{cursor:"pointer",backgroundColor:a==null?void 0:a.white,color:a==null?void 0:a.black},autoComplete:"off",value:p(n==null?void 0:n.from),onClickCapture:()=>{h(f=>!f)},readOnly:!0,placeholder:"開始日期"})]}),e.jsxs("div",{className:"endDate label-input gap-1 space-x-2",children:[e.jsxs("label",{children:[e.jsx(_,{}),"出差日期(迄)"]}),e.jsx("input",{...j(`tripData.${t}.endDate`),className:"date w-full",style:{cursor:"pointer",backgroundColor:a==null?void 0:a.white,color:a==null?void 0:a.black},autoComplete:"off",value:p(n==null?void 0:n.to),onClickCapture:()=>{h(f=>!f)},readOnly:!0,placeholder:"結束日期"})]}),e.jsx(te,{mode:"range",footer:e.jsx(d,{}),selected:n,onSelect:w,fromYear:2022,toYear:+c.thisYear+1,month:u,onMonthChange:x,captionLayout:"dropdown-buttons",style:{position:"absolute",top:"100%",right:0,zIndex:99,display:r?"block":"none",color:a==null?void 0:a.white},styles:{months:{backgroundColor:a==null?void 0:a.black},cell:{border:0}},modifiersStyles:{selected:{backgroundColor:a.blue},today:{textDecoration:"underLine",textUnderlineOffset:".3rem"}}})]})})},We=()=>{var x;const o=(x=P())==null?void 0:x.color,{control:t}=B(),{fields:a,append:c,remove:r}=le({name:"tripData",control:t}),h=I(n=>n.tripDetail),u=V();return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{type:"button",className:"p-0",onClick:()=>{c({startDate:"",endDate:""}),u(ie())},children:e.jsx(E,{style:{backgroundColor:o.sectionHeader,color:o.white},icon:e.jsx(ce,{}),children:"新增出差計畫"})})}),a.map((n,s)=>e.jsx("div",{children:e.jsx(T,{children:e.jsx(Ae,{type:"addForm",main:e.jsx(qe,{data:n,index:s}),sub:e.jsx(Ee,{type:"addForm",data:h.body[s],index:s}),remove:()=>{r(s)},index:s})})},n.id))]})},Ke=J().shape({DeptId:k(),CreateId:k(),Transport:k().required("不寫交通工具是要用跑的嗎"),IsLodging:k(),StayDays:Q(),Days:Q(),Advance_Amount:de(),Curr:k().when("Advance_Amount",{is:o=>o!=="0",then:()=>k().required("幣別不寫給你玩具鈔票"),otherwise:()=>k()}),Deputy:k().required("沒有代理人你要開分身回來做嗎"),tripData:ue().of(J().shape({startDate:k().required("出差日期為必填"),endDate:k().required("出差日期為必填")}))}),Ge=()=>{var C;const o=(C=P())==null?void 0:C.color,t=I(g=>g.time),a=I(g=>g.tripDetail);function c(){const g=De(new Date(t.today)),l=U.offset(g,7),i=U.offset(g,13);function y(v){return Y("%Y-%m-%d")(v)}return{nextMonday:y(l),nextSunday:y(i)}}const r=Z({shouldUnregister:!0,criteriaMode:"all",mode:"onChange",resolver:me(Ke),defaultValues:{DeptId:"",CreateId:"",Transport:"",IsLodging:"No",StayDays:0,Days:0,Advance_Amount:"0",Curr:"",Deputy:"",tripData:[]}}),{clearNewFormSelect:h}=O(),[u]=q("review"),[x]=q("errors"),[n]=q("files"),s=c(),{spreadData:j}=pe(a.body,t.today),m=I(g=>g.tripDetail).body;async function d(g){const l=await z.getCus(g,"DEU");return l==null?void 0:l[0].CustId}function p(g){const l={...g,...s},i=S(l),y=Promise.all(j.map(async(v,H)=>({BTPId:i||"no id",Item:H+1,CustId:await d(v.data.cus),TripEvent:v.data.purpose,Description:v.data.PS,Country:"DEU",Area:v.data.district,City:v.data.city,Hotel:v.data.hotel,StartDT:v.date[0],EndDT:v.date[v.date.length-1]})));w(y),h()}async function S(g){const l=await z.postNewForm(g);console.log(l)}async function w(g){const l=await z.pushNewData(await g);console.log(l)}const D=$({name:"tripData",control:r.control}),f=$({name:["Advance_Amount","Curr"],control:r.control}),F=V();b.useEffect(()=>{F(fe(D))},[D,F]),b.useEffect(()=>{if(j.length===0){if(r.formState.errors.tripData)return;r.setError("tripData",{type:"custom",message:"沒出差還想送單啊"})}if(m.some(g=>g.data.length===0)){if(r.formState.errors.tripData)return;r.setError("tripData",{type:"custom",message:"有漏欸"})}},[r,j,m]),b.useEffect(()=>{r.trigger()},[r,D,m,f]);function N(){r.trigger(),F(we(r.formState.errors)),r.formState.isValid?u("on"):x("on")}return e.jsx(ee,{className:"main-section-gap",children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"top-btn-list",children:[e.jsx("button",{type:"button",onClick:N,children:e.jsx(E,{icon:e.jsx(he,{size:"1.5rem",color:o.white}),primary:!0,children:"送簽表單"})}),e.jsx("button",{type:"button",children:e.jsx(E,{icon:e.jsx(xe,{size:"1.5rem"}),children:"暫存檔案"})}),e.jsx("button",{type:"button",onClick:()=>{n("on")},children:e.jsx(E,{icon:e.jsx(ye,{size:"1.5rem"}),children:"附加文件"})}),e.jsx("button",{type:"button",children:e.jsx(je,{to:"../",children:e.jsx(E,{icon:e.jsx(ge,{size:"1.25rem"}),children:"返回列表"})})})]}),e.jsx(be,{...r,children:e.jsxs("form",{id:"business apply",onSubmit:r.handleSubmit(p),className:"main-section-gap",children:[e.jsx(T,{children:e.jsx(Te,{type:"addForm"})}),e.jsx(T,{children:e.jsx(Re,{})}),e.jsx(We,{}),e.jsx(T,{children:e.jsx(Me,{})}),e.jsx(T,{children:e.jsx(Pe,{})}),e.jsx(T,{children:e.jsx(He,{})})]})})]})})},Je=({className:o})=>{var g;const t=(g=P())==null?void 0:g.color,a=I(l=>l.time),{register:c,handleSubmit:r,control:h,setValue:u}=Z({shouldUnregister:!0,criteriaMode:"all",mode:"onChange",defaultValues:{dept:"",EmpId:"",formStatus:"",date:{start:"",end:""}}}),x=V();function n(l){x(Se(l)),x(Ne(l))}const{options:s}=G(),j=$({name:"dept",control:h}),m=[{label:"未簽核",value:"1"},{label:"已簽核",value:"2"},{label:"退簽",value:"3"},{label:"作廢",value:"4"}];function d(l){return M(l)?Y("%Y-%m-%d")(l):""}const[p,S]=b.useState({from:"",to:""}),[w,D]=b.useState(),[f,F]=b.useState(!1),N=()=>{const l=()=>{D(new Date(a.today))};return e.jsxs("span",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("p",{style:{margin:0,display:"flex",alignItems:"center"},children:"select 2 day"}),e.jsx("button",{type:"button",onClick:l,children:"Today"})]})};function C(l){S(l),M(l==null?void 0:l.from)&&M(l==null?void 0:l.to)&&(u("date",{start:d(l.from),end:d(l.to)}),F(!1))}return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:r(n),style:{backgroundColor:t.headForm_bgc},className:`${o} flex items-center gap-4 rounded-xl px-16 py-4`,children:[e.jsxs("div",{className:"form-body grid w-full gap-4",style:{gridTemplateColumns:"4fr 2fr"},children:[e.jsxs("div",{className:"member label-input",children:[e.jsx("label",{children:"申請人員"}),e.jsx(L,{control:h,name:"dept",render:({field:{onChange:l}})=>e.jsx(R.Async,{options:s.dept,onChange:l,placeholder:"選擇部門",getLabelFunction:i=>i.DeptName,getValueFunction:i=>i.DeptId,value:"DeptId"})}),e.jsx(L,{control:h,name:"EmpId",render:({field:{onChange:l}})=>e.jsx(R.Async,{options:s.member,onChange:l,placeholder:"選擇業務",getLabelFunction:i=>i.EmpName,getValueFunction:i=>i.EmpId,value:"EmpId",filterFunction:i=>i.data.DeptId===j})})]}),e.jsxs("div",{className:"status label-input",children:[e.jsx("label",{children:"表單狀態"}),e.jsx(L,{control:h,name:"formStatus",render:({field:{onChange:l}})=>e.jsx(R.Normal,{options:m,onChange:l,placeholder:"選擇狀態"})})]}),e.jsxs("div",{className:"date label-input",children:[e.jsx("label",{children:"出差日期"}),e.jsxs("span",{className:"relative flex w-full items-center gap-2",children:[e.jsx("input",{className:"w-full",style:{cursor:"pointer",backgroundColor:t==null?void 0:t.white,color:t==null?void 0:t.black},autoComplete:"off",value:d(p==null?void 0:p.from),onClickCapture:()=>{F(l=>!l)},readOnly:!0,placeholder:"開始日期"}),e.jsx("span",{children:"~"}),e.jsx("input",{className:"w-full",style:{cursor:"pointer",backgroundColor:t==null?void 0:t.white,color:t==null?void 0:t.black},autoComplete:"off",value:d(p==null?void 0:p.to),onClickCapture:()=>{F(l=>!l)},readOnly:!0,...c("date.end"),placeholder:"結束日期"}),e.jsx(te,{mode:"range",footer:e.jsx(N,{}),selected:p,onSelect:C,fromYear:2022,toYear:+a.thisYear+1,month:w,onMonthChange:D,captionLayout:"dropdown-buttons",style:{position:"absolute",top:"100%",right:0,zIndex:99,display:f?"block":"none",color:t==null?void 0:t.white},styles:{months:{backgroundColor:t==null?void 0:t.black},cell:{border:0}},modifiersStyles:{selected:{backgroundColor:t.blue}}})]})]})]}),e.jsxs("button",{type:"submit",className:"flex min-w-fit items-center justify-center px-8",style:{backgroundColor:t.sectionHeader,color:t.white},children:[e.jsx(ve,{size:"1.5rem",color:t.white}),"查詢表單"]})]})})},Qe=()=>{const[o,t]=b.useState([]),a=I(n=>n.listFormState),c=a.status;function r(n){return new Date(n).getTime()}function h(n){return Y("%Y-%m-%d")(new Date(n))}async function u(n){return await z.getBusinessApplyDetail(n)}const x=b.useCallback(n=>n.map(j=>!j.StartDT||!j.EndDT?[]:[h(j.StartDT.split(" ")[0]),h(j.EndDT.split(" ")[0])]),[]);return b.useEffect(()=>{const{props:n,body:s}=a;async function j(){const m=C(s);if(!m)return alert("查無資料"),[];const d=await Promise.all(m.map(async i=>await u(i.BTPId))),p=d.map(i=>i.filter(y=>y.ResourcesName==="拜訪A.T.U.").length),S=d.map(i=>i.filter(y=>y.ResourcesName==="拜訪現有客戶").length),w=d.map(i=>i.filter(y=>y.ResourcesName==="拜訪新客戶").length),D=d.map(i=>x(i)),f=m.map((i,y)=>{var v;return{date:l(D[y]),formId:i.BTPId,atuNum:p[y],oldCusNum:S[y],newCusNum:w[y],name:i.EmpName,formStatus:i.Status,nextSign:(v=i.SName)==null?void 0:v.split("/")[0].replace(/ /g,"")}}),N=g(f).reverse().map((i,y)=>({id:y+1,...i}));t(N);function C(i){return n.EmpId?i==null?void 0:i.filter(y=>y.Createid===n.EmpId):i}function g(i){return!n.date||!n.date.start||!n.date.end?i:i.filter(y=>r(n.date.start)<=r(y.date.start)&&r(y.date.end)<=r(n.date.end))}function l(i){const y=[...new Set(i.reduce((v,H)=>v.concat(H),[]))];return{start:y[0],end:y[y.length-1]}}}j()},[x,a]),{data:o,status:c}},Xe=A.createContext({}),se=!0;function Ze({baseColor:o,highlightColor:t,width:a,height:c,borderRadius:r,circle:h,direction:u,duration:x,enableAnimation:n=se}){const s={};return u==="rtl"&&(s["--animation-direction"]="reverse"),typeof x=="number"&&(s["--animation-duration"]=`${x}s`),n||(s["--pseudo-element-display"]="none"),(typeof a=="string"||typeof a=="number")&&(s.width=a),(typeof c=="string"||typeof c=="number")&&(s.height=c),(typeof r=="string"||typeof r=="number")&&(s.borderRadius=r),h&&(s.borderRadius="50%"),typeof o<"u"&&(s["--base-color"]=o),typeof t<"u"&&(s["--highlight-color"]=t),s}function et({count:o=1,wrapper:t,className:a,containerClassName:c,containerTestId:r,circle:h=!1,style:u,...x}){var n,s,j;const m=A.useContext(Xe),d={...x};for(const[N,C]of Object.entries(x))typeof C>"u"&&delete d[N];const p={...m,...d,circle:h},S={...u,...Ze(p)};let w="react-loading-skeleton";a&&(w+=` ${a}`);const D=(n=p.inline)!==null&&n!==void 0?n:!1,f=[],F=Math.ceil(o);for(let N=0;N<F;N++){let C=S;if(F>o&&N===F-1){const l=(s=C.width)!==null&&s!==void 0?s:"100%",i=o%1,y=typeof l=="number"?l*i:`calc(${l} * ${i})`;C={...C,width:y}}const g=A.createElement("span",{className:w,style:C,key:N},"‌");D?f.push(g):f.push(A.createElement(A.Fragment,{key:N},g,A.createElement("br",null)))}return A.createElement("span",{className:c,"data-testid":r,"aria-live":"polite","aria-busy":(j=p.enableAnimation)!==null&&j!==void 0?j:se},t?f.map((N,C)=>A.createElement(t,{key:C},N)):f)}const tt=()=>e.jsx(et,{count:1,height:"3rem"}),st=o=>{const{children:t,status:a}=o;return a==="loading"?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:100,className:"p-1",children:e.jsx(tt,{})})})}):e.jsx("tbody",{children:t})},at=(o,t)=>{const[a,c]=b.useState(1),r=Math.ceil(o.length/t),[h,u]=b.useState(!0),[x,n]=b.useState(!0),s={prev:h,next:x};b.useEffect(()=>{n(a!==r),u(a!==1),r===0&&(u(!1),n(!1))},[a,r]);function j(){if(!x){console.log("cant next");return}c(p=>p+1)}function m(){if(!h){console.log("cant prev");return}c(p=>p-1)}return{dataInThisPage:b.useMemo(()=>{const p=(a-1)*t,S=p+t;return o.slice(p,S)},[a,o,t]),nextPage:j,prevPage:m,buttonStatus:s}},K=o=>{const{date:t}=o;return e.jsx("span",{style:{whiteSpace:"nowrap"},children:t})},nt=()=>{var n;const o=(n=P())==null?void 0:n.color,{data:t,status:a}=Qe(),c=10,{dataInThisPage:r,nextPage:h,prevPage:u,buttonStatus:x}=at(t,c);return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{children:e.jsxs("table",{children:[e.jsx("thead",{style:{backgroundColor:o.sectionHeader,color:o.white},children:e.jsxs("tr",{children:[e.jsx("th",{children:"項次"}),e.jsx("th",{children:"出差日期"}),e.jsx("th",{children:"表單號碼"}),e.jsx("th",{children:"ATU 拜訪數"}),e.jsx("th",{children:"既有客戶拜訪數"}),e.jsx("th",{children:"新客戶拜訪數"}),e.jsx("th",{children:"申請人員"}),e.jsx("th",{children:"表單狀態"}),e.jsx("th",{children:"待簽核人員"})]})}),e.jsx(st,{status:a,children:e.jsx(e.Fragment,{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:"no data"})}):r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:!s.date.start||!s.date.end?e.jsx(e.Fragment,{children:" - "}):s.date.start===s.date.end?e.jsx(K,{date:s.date.start}):e.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[e.jsx(K,{date:s.date.start}),"~",e.jsx(K,{date:s.date.end})]})}),e.jsx("td",{children:s.formId}),e.jsx("td",{children:s.atuNum}),e.jsx("td",{children:s.oldCusNum}),e.jsx("td",{children:s.newCusNum}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.formStatus}),e.jsx("td",{children:s.nextSign||"-"})]},s.id))})})]})}),e.jsxs("div",{className:"flex justify-center gap-4",style:{display:t.length<=c?"none":"flex"},children:[e.jsx(X,{type:"prev",onClick:u,disabled:!x.prev}),e.jsx(X,{type:"next",onClick:h,disabled:!x.next})]})]})},rt=()=>{var t;const o=(t=P())==null?void 0:t.color;return e.jsx(ee,{className:"main-section-gap",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"top-btn-list",children:e.jsx(Fe,{to:"add",children:e.jsx(E,{primary:!0,icon:e.jsx(ke,{size:"1.5rem",color:o.white}),children:"建立表單"})})}),e.jsx(Je,{}),e.jsx(nt,{})]})})},ut=()=>e.jsxs(e.Fragment,{children:[e.jsx(Le,{title:"國內外出差申請單"}),e.jsx(b.Suspense,{fallback:e.jsx("h1",{children:"啊我還在跑..."}),children:e.jsxs(Ie,{children:[e.jsx(W,{index:!0,element:e.jsx(rt,{})}),e.jsx(W,{path:"add",element:e.jsx(Ge,{})}),e.jsx(W,{path:"sign",element:e.jsx("h1",{children:"表單簽核"})})]})})]});export{ut as default};
