import{b as C,H as p,r as b,j as e,A as S}from"./index-64ebcfb1.js";import{s as w}from"./main-95402293.js";import{t as x}from"./popup-b0faad0b.js";const A=({data:s,EmpId:c,time:l})=>{var m;const{t}=C("confirm modal"),d=(m=p())==null?void 0:m.color,j=s.reduce((r,n)=>r.concat(n),[]),a=j.filter(r=>{var n;return((n=r.data)==null?void 0:n.eventId)===x.atu}),h=j.filter(r=>{var n;return((n=r.data)==null?void 0:n.eventId)===x.oldCus}),o=j.filter(r=>{var n;return((n=r.data)==null?void 0:n.eventId)===x.newCus}),i=a.length+h.length+o.length;function u(r){return i===0?"0":(r/i*100).toFixed(1)}const f=b.useMemo(()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],[]),[T,y]=b.useState(0);return b.useEffect(()=>{async function r(){var g;const n=await S.threshold.fetch(l.year,c),k=f[new Date(`2023-${l.month}-01`).getMonth()];y(parseInt((g=n==null?void 0:n[0])==null?void 0:g[k])||0)}r()},[c,f,l]),e.jsx(e.Fragment,{children:e.jsx(w,{title:t("percentTable.title"),children:e.jsxs("table",{children:[e.jsx("thead",{style:{backgroundColor:d.confirmTable.header},children:e.jsxs("tr",{children:[e.jsx("th",{children:t("percentTable.threshold")}),e.jsx("th",{colSpan:2,children:`≥ ${100-T}`}),e.jsx("th",{children:`≤ ${T}`})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{children:t("percentTable.atu")}),e.jsx("td",{children:t("percentTable.oldCus")}),e.jsx("td",{children:t("percentTable.newCus")})]}),e.jsxs("tr",{children:[e.jsx("td",{children:t("percentTable.number")}),e.jsx("td",{children:a.length}),e.jsx("td",{children:h.length}),e.jsx("td",{children:o.length})]}),e.jsxs("tr",{children:[e.jsx("td",{children:t("percentTable.percent")}),e.jsx("td",{children:u(a.length)+"%"}),e.jsx("td",{children:u(h.length)+"%"}),e.jsx("td",{children:u(o.length)+"%"})]})]})]})})})},D=({data:s})=>{var d;const c=(d=p())==null?void 0:d.color,l=s==null?void 0:s.data.eventId;let t;switch(l){case x.atu:t=c.confirmTable.atu;break;case x.oldCus:t=c.confirmTable.old;break;case x.newCus:t=c.confirmTable.new;break;default:t=c.white}return e.jsx("td",{style:{backgroundColor:t},children:s==null?void 0:s.data.cus})},F=({data:s})=>{var h;const{t:c}=C("confirm modal"),l=(h=p())==null?void 0:h.color,{rows:t,nextWeekDays:d}=s,[j,a]=b.useState(!1);return b.useEffect(()=>{t.length===0?a(!1):a(!0)},[t]),e.jsx(e.Fragment,{children:e.jsx(w,{title:c("weekTable.title"),children:e.jsxs("table",{children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{backgroundColor:l.confirmTable.header},children:[e.jsx("th",{children:"MON"}),e.jsx("th",{children:"TUE"}),e.jsx("th",{children:"WED"}),e.jsx("th",{children:"THU"}),e.jsx("th",{children:"FRI"}),e.jsx("th",{style:{backgroundColor:l.confirmTable.header_weekend},children:"SAT"}),e.jsx("th",{style:{backgroundColor:l.confirmTable.header_weekend},children:"SUN"})]}),e.jsx("tr",{style:{backgroundColor:l.white},children:d.map((o,i)=>e.jsx("td",{style:{whiteSpace:"nowrap"},children:o},i))})]}),e.jsx("tbody",{children:j?t.map((o,i)=>e.jsx("tr",{children:o.map((u,f)=>e.jsx(D,{data:u},f))},i)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:"no data"})})})]})})})};export{A as P,F as W};
